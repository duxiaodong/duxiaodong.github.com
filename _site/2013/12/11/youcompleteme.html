
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    
    <title>Ubuntu12.04下自动补齐插件YouCompleteMe安装 | June's Blog</title>
    
    <meta name="description" content="">
    <meta name="author" content="June">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/themes/twitter/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/themes/twitter/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/images/june.png" type="image/x-icon" />
    <!-- <link rel="shortcut icon" href="/favicon.ico"> -->
  <!-- Update these with your own images
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->
  </head>

  <body>

    <div class="navbar">
      <div class="navbar-inner">
        <div class="container">
          <a class="brand" href="/">June's Blog</a>
          <ul class="nav">
            
            
            


  
    
      
      	
      	<li><a href="/tags.html">Tags</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/categories.html">Categories</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/archive.html">Archive</a></li>
      	
      
    
  
    
      
    
  




            <li class="divider-vertical"></li>
            
            
            


  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/about.html">About</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/atom.xml">RSS</a></li>
      	
      
    
  





            <!-- <li><a href="http://feed.zhuoqun.net/">RSS</a></li> -->
          </ul>

          <span class="pull-right slogan"> Under Linux </span>
        </div>
      </div>
    </div>

    <div class="container">

      <div class="content">
        
<div class="row post">
  <div class="span8">
    <h1 class="title">Ubuntu12.04下自动补齐插件YouCompleteMe安装</h1>
    <h2>说明</h2>

<p>转载：从哪里转来的忘记了-_-，对不起原作者了Orz，知道的麻烦留言回复下：</p>

<p>本文主要是Ubuntu12.04上配置YouCompleteMe(以后简称YCM)的总结，主要是参考的<a href="https://github.com/Valloric/YouCompleteMe">这里</a>,
其他的通过安装Vundle和备份vimrc就很好搞定，不多说了。vimrc和其他一些软件可以<a href="https://github.com/wklken/k-vim">参考这里</a>,我主要是借鉴这里的。目前主要是拷贝有用的过来，以后能用上的在自己修改吧。</p>

<h2>安装vim</h2>

<p>首先，这个东西对Vim的版本有要求( Vim 7.3.584及以上)，在apt-get下的vim版本太低，所以需要重新编译vim安装，
关于这个可以<a href="https://github.com/Valloric/YouCompleteMe/wiki/Building-Vim-from-source">参考这里</a>，基本照做就行。</p>

<h2>安装Vundle</h2>

<p>这个东西是管理vim插件的一个插件。具体办法不用多说，直接上官方<a href="https://github.com/gmarik/vundle#about">地址</a>，注意下vimrc的配置就好，
用起来非常好使，直接在vimrc添加所需的插件的地方就好，比如我要安装YouCompleteMe那么在vimrc中首先添加:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">Bundle &quot;Valloric/YouCompleteMe&quot;
</code></pre></div>
<p>然后进入vim，运行<code>:BundleInstall</code>,然后就行了(当然YouCompleteMe也是需要这个的，但是折腾的地方主要不在这)</p>

<h2>安装ack.vim</h2>

<p>在ubuntu中得首先安装</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">sudo apt-get install ack-grep
</code></pre></div>
<p>然后用vimrc就行</p>

<h2>安装YCM</h2>

<p>一般vim插件的安装基本上到上面就基本结束了，但这个要麻烦点，我们得继续安装YCM，主要是编译下ycm_core.
准备工作:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">sudo apt-get install build-essential cmake
sudo apt-get install python-dev
</code></pre></div>
<p>如果要带上是C/C++的话:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">cd ~/.vim/bundle/YouCompleteMe
./install.sh --clang-completer
</code></pre></div>
<p>没有C/C++的话就比较简单:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">cd ~/.vim/bundle/YouCompleteMe
./install.sh
</code></pre></div>
<p>理论上这样应该就可以的，但是我这边不行，主要是没有libclang.so这个东西，这个libclang.so貌似系统
没有，我locate libclang.so 是不行的，apt-cache search llvm的最高版本貌似没有3.3，所以我手动装了.
Ubuntu上详细的安装可以见这里,<a href="http://solarianprogrammer.com/2013/01/17/building-clang-libcpp-ubuntu-linux/">这个</a>还有libc++的配置，不过因为要翻墙，所以在这里把我用到的备份下.
准备工作:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">sudo apt-get install g++ subversion
</code></pre></div>
<p>接着下载llvm的源码安装即可，我把源码放在~下了,当然可以是随意的地方:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">cd ~
mkdir Clang &amp;&amp; cd Clang
svn co http://llvm.org/svn/llvm-project/llvm/trunk llvm
cd llvm/tools
svn co http://llvm.org/svn/llvm-project/cfe/trunk clang
</code></pre></div>
<p>然后编译就好了，注意下路径就好:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">cd ..
cd ..
mkdir build &amp;&amp; cd build
../llvm/configure --prefix=/usr/clang_3_3 --enable-optimized --enable-targets=host
make -j 8
</code></pre></div>
<p>最后安装Clang:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">sudo make install
</code></pre></div>
<p>配置下环境变量在~/.bashrc下加这么一句就好:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">export PATH=/usr/clang_3_3/bin:$PATH
</code></pre></div>
<p>最后的工作比较简单:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">cd ~
mkdir ycm_build
cd ycm_build
</code></pre></div>
<p>生成Makefile:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">cmake -G &quot;Unix Makefiles&quot; . ~/.vim/bundle/YouCompleteMe/cpp
</code></pre></div>
<p>到这不要C/C++其实就好了，不过折腾了那么久就是为了C/C++，所以还得继续。</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text"> cmake -G &quot;Unix Makefiles&quot; -DEXTERNAL_LIBCLANG_PATH=/usr/clang_3_3/lib/libclang.so .
 ~/.vim/bundle/YouCompleteMe/cpp
</code></pre></div>
<p>这个我是指定的动态库的地址，这样configure就不会说缺少这个库了。最后:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">make ycm_core
</code></pre></div>
<p>最后，注意下配置那个vimrc的配置就好了，全文收工。</p>

    <ul class="pager">
    
      <li class="previous"><a href="/2013/12/09/lua.html" title="Lua脚本语言学习笔记">&larr; Lua脚本语言学习笔记</a></li>
    
    
      <li class="next"><a href="/2013/12/12/vim-config.html" title="Ubuntu12.04下Vim配置之不折腾版">Ubuntu12.04下Vim配置之不折腾版&rarr;</a></li>
    
    </ul>
    
  </div>
  
  <div class="span4 sidebar">
    <h4 class="date">发布日期：<span>11 December 2013</span></h4>

  
    <h4>归档</h4>
    <ul class="categories_box">
    
    


  
     
    	<li><a href="/categories.html#vim-ref">
    		vim <span>2</span>
    	</a></li>
    
  


    </ul>
    
  
  
    <h4>标签</h4>
    <ul class="tag_box">
    
    


  
     
    	<li><a href="/tags.html#vim-ref">vim <span>2</span></a></li>
     
    	<li><a href="/tags.html#YCM-ref">YCM <span>1</span></a></li>
    
  



    </ul>
    
  </div>
</div>


      </div>

      <footer>
        <p>&copy; <a href="mailto:junevimer@gmail.com">June</a> 2013. 
          Proudly powered by <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
          and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>
        </p>
      </footer>

    </div> <!-- /container -->

    
  </body>
</html>

